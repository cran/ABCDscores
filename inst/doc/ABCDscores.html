<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>ABCDscores</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">ABCDscores</h1>



<div id="setup" class="section level2">
<h2>Setup</h2>
<p>After installing the package, you can load it with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(ABCDscores)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="co">#&gt; Welcome to the `ABCDscores` package! For more information, visit: https://software.nbdc-datahub.org/ABCDscores/</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="co">#&gt; This package is developed by the ABCD Data Analysis, Informatics &amp; Resource Center (DAIRC) at the J. Craig Venter Institute (JCVI).</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="co">#&gt; If `ABCDscores` is helpful to your research, please cite:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="co">#&gt; Zhang, L., Celhay, O., Das, B., Berman, S., Ziemer, L. R., Smith, C. J., Dale, A. M., &amp; Linkersdörfer, J. (2025). ABCDscores: An R package for computing summary scores in the ABCD Study. bioRxiv. https://doi.org/10.1101/2025.09.04.674066</span></span></code></pre></div>
<p>Alternatively you can call functions directly, without loading the package, using <code>::</code>, e.g., <code>ABCDscores::name_of_function(...)</code></p>
<div id="data-preparation" class="section level3">
<h3>Data preparation</h3>
<p>To compute summary scores, you’ll need to have downloaded data from the ABCD Study<sup>®</sup>. To request access to the data, visit the <a href="https://www.nbdc-datahub.org/">NIH Brain Development Cohorts (NBDC) Data Hub</a> Once you have access, you can use different tools to access and download the data; they are described in more detail in the <a href="https://docs.abcdstudy.org/latest/tools/tools.html">ABCD data documentation</a>.</p>
<p>Here we assume that you created a dataset containing the variables you want to summarize in <a href="https://abcd.deapscience.com/">DEAP</a> and downloaded it in the <code>rds</code> format. Afterwards, unzip the <code>dataset.rds.zip</code> file to the working directory (or move the zip file to the working directory and use <code>utils::unzip(&quot;dataset.rds.zip&quot;)</code> to extract all files). The unzipped files should consist of a <code>dataset.rds</code> file and an Excel file with the data dictionary and categorical levels.</p>
<p>Load the data into R using the following command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>data &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;dataset.rds&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="computing-summary-scores" class="section level2">
<h2>Computing summary scores</h2>
<div id="score-naming-convention" class="section level3">
<h3>Score naming convention</h3>
<p>Before computing summary scores, it is important to understand the structure and nomenclature of the functions in the package:</p>
<ul>
<li>For any given summary score, the function to compute it is named <code>compute_&lt;score_name&gt;()</code>. For example, the function to compute the score <code>fc_p_psb_mean</code> is named <code>compute_fc_p_psb_mean()</code>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></li>
<li>For any given measure/table, there exists a high-level <code>compute_&lt;table_name&gt;_all()</code> function that computes all scores for that measure/table. For example, the function to compute all scores for the <code>fc_p_psb</code> measure/table is named <code>compute_fc_p_psb_all()</code>.</li>
<li>For any given summary score function, certain columns—the columns that are being summarized and in some cases additional columns like age or sex—are required to be present in the data for the score to be computed. The function documentation lists the required columns for a given function. In addition, the columns that a summary score function summarizes are typically provided as a character vector named <code>vars_&lt;measure_name&gt;</code>. For example, the vector with the columns that are summarized by the <code>fc_p_psb_mean</code> function is named <code>vars_fc_p_psb</code>.</li>
</ul>
<p>The <a href="https://software.nbdc-datahub.org/ABCDscores/reference/index.html">references page</a> provides a list of all available functions and their parameters.</p>
</div>
<div id="basic-usage" class="section level3">
<h3>Basic usage</h3>
<p>After reading in the data, we can start to compute summary scores. As an example, we will demonstrate how to compute the two summary scores for the <code>fc_p_psb</code> measure/table (<code>fc_p_psb_mean</code> and <code>fc_p_psb_nm</code>) in two different ways:</p>
<ol style="list-style-type: decimal">
<li>using the specific functions to compute one score at a time</li>
<li>using the <code>_all()</code> function to compute all scores for the measure/table at once.</li>
</ol>
<p>When we refer to the documentation for <code>compute_fc_p_psb_mean()</code>, we see that it requires the following variables: <code>fc_p_psb_001</code>, <code>fc_p_psb_002</code>, and <code>fc_p_psb_003</code>. If these variables are part of the dataset created in and downloaded from <a href="https://abcd.deapscience.com/">DEAP</a>, they should be present in the data after reading in <code>dataset.rds</code> as demonstrated above.</p>
<p>Here, for demonstration purposes, we will create a dummy data frame with these columns:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>data &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>  <span class="dt">fc_p_psb_001 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5&quot;</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>  <span class="dt">fc_p_psb_002 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="ot">NA</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>  <span class="dt">fc_p_psb_003 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="ot">NA</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>data</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;       </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1           </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2           </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2           </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4           </span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;</span></span></code></pre></div>
<p>For most summary score functions, only the <code>data</code> argument (input data frame) is required, i.e., we can just use the function like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_mean</span>(data)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                     1   </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                    NA   </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                     2.67</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                     4   </span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                 NA</span></span></code></pre></div>
<p>We can do the same using <code>fc_p_psb_nm()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_nm</span>(data)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_nm</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;              &lt;int&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                      0</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                      1</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                      0</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                      0</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                   2</span></span></code></pre></div>
<p>We can also compute both scores at the same time by chaining the function calls using the pipe operator:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>data <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">compute_fc_p_psb_mean</span>() <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">compute_fc_p_psb_nm</span>()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean fc_p_psb_nm</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;       &lt;int&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                     1              0</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                    NA              1</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                     2.67           0</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                     4              0</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                 NA              2</span></span></code></pre></div>
<p>Lastly, if we want to compute all scores for the measure with one function call, we can use the <code>compute_&lt;table_name&gt;_all()</code> function for the <code>fc_p_psb</code> table:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_all</span>(data)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean fc_p_psb_nm</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;       &lt;int&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                     1              0</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                    NA              1</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                     2.67           0</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                     4              0</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                 NA              2</span></span></code></pre></div>
</div>
<div id="important-parameters-and-customization" class="section level3">
<h3>Important parameters and customization</h3>
<div id="data" class="section level4">
<h4><code>data</code></h4>
<p>The <code>data</code> argument is the input data frame that contains the columns required to compute the score. The required columns are documented in the function documentation for each score.</p>
</div>
<div id="name" class="section level4">
<h4><code>name</code></h4>
<p>The <code>name</code> argument is used to specify the name of the output score. The default default value for this parameter is the official name of the column in the released data, but it can be overridden by users with a custom name.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_mean</span>(data, <span class="dt">name =</span> <span class="st">&quot;my_custom_name&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 my_custom_name</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                 &lt;dbl&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                      1   </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                     NA   </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                      2.67</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                      4   </span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                  NA</span></span></code></pre></div>
<p>For example, this is useful when the data frame specified in <code>data</code> contains the official summary score that one is trying to reproduce. In this case, the user is required to specify a different name; otherwise the function will return an error.</p>
</div>
<div id="combine" class="section level4">
<h4><code>combine</code></h4>
<p>The <code>combine</code> argument is used to specify whether to combine the output score with the input data frame. The default value is <code>TRUE</code>, which means the output score is appended as a new column on the right hand side of the input data frame. If the argument is set to <code>FALSE</code>, the output score is returned as a single-column data frame:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_mean</span>(data, <span class="dt">combine =</span> <span class="ot">FALSE</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 1</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_mean</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a><span class="co">#&gt;           &lt;dbl&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="co">#&gt; 1          1   </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a><span class="co">#&gt; 2         NA   </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="co">#&gt; 3          2.67</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a><span class="co">#&gt; 4          4   </span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a><span class="co">#&gt; 5         NA</span></span></code></pre></div>
</div>
<div id="max_na" class="section level4">
<h4><code>max_na</code></h4>
<p>The <code>max_na</code> argument is used to specify the maximum number of missing values across all summarized variables a given row (or participant/event) can have for the summary score to still be computed. If the number of missing values in a row exceeds the specified value, the score for that row is set to <code>NA</code>. Depending on the summary score, the number of missing values allowed may vary and not all summary score functions have this argument.</p>
<ul>
<li><code>NULL</code>: No limit on missing values.</li>
<li><code>0</code>: No missing values allowed.</li>
<li><code>1</code>: At most one missing value allowed.</li>
<li>…</li>
</ul>
<p>For most summary scores in the ABCD data resource, <code>max_na</code> is set to a number that ensures that &gt;=80% of the variables that the given score summarizes have a non-missing value. Users can use the <code>max_na</code> argument if they want to compute the summary score in a more lenient or more restrictive manner.</p>
<p>As an example, let’s explore how the summary score changes when we set <code>max_na</code> argument to <code>1</code> (above we used the default, which in the case of <code>compute_fc_p_psb_mean()</code> is <code>0</code>). Now a score is computed for the second row which has one missing value but not for the last row which has two missing values:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_mean</span>(data, <span class="dt">max_na =</span> <span class="dv">1</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                     1   </span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                     2   </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                     2.67</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                     4   </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                 NA</span></span></code></pre></div>
<p>When we change <code>max_na</code> to <code>2</code>, a score is also computed for the last row:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="kw">compute_fc_p_psb_mean</span>(data, <span class="dt">max_na =</span> <span class="dv">2</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a><span class="co">#&gt; 1 1            1            1                     1   </span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a><span class="co">#&gt; 2 2            &lt;NA&gt;         2                     2   </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a><span class="co">#&gt; 3 3            3            2                     2.67</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a><span class="co">#&gt; 4 4            4            4                     4   </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a><span class="co">#&gt; 5 5            &lt;NA&gt;         &lt;NA&gt;                  5</span></span></code></pre></div>
</div>
<div id="exclude" class="section level4">
<h4><code>exclude</code></h4>
<p>The <code>exclude</code> argument is used to specify values that should be excluded from the computation of the score. Some specific values in the data might be considered as missing values, e.g., coded non-responses like “Don’t know” (<code>999</code>), “Decline to answer” (<code>777</code>), etc. This argument allows the user to specify these values so that they are treated as missing values during the computation of the score (importantly, the <code>max_na</code> argument applies to all values that are either missing, <code>NA</code>, or specified as values to be excluded using the <code>exclude</code> argument). Not all score functions have this argument.</p>
<p>In this example we use another score function <code>compute_mh_p_abcl__afs__frnd_sum</code> which has the <code>exclude</code> argument. We first construct a dummy data frame:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>data &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>  <span class="dt">mh_p_abcl__frnd_001 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>  <span class="dt">mh_p_abcl__frnd_002 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">777</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">777</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a>  <span class="dt">mh_p_abcl__frnd_003 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="dv">777</span>),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a>  <span class="dt">mh_p_abcl__frnd_004 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">999</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>data</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a><span class="co">#&gt;                 &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a><span class="co">#&gt; 1                   1                   1                   1</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a><span class="co">#&gt; 2                   2                 777                   2</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a><span class="co">#&gt; 3                   3                   3                  NA</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a><span class="co">#&gt; 4                   4                   4                   4</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a><span class="co">#&gt; 5                   5                 777                 777</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a><span class="co">#&gt; # ℹ 1 more variable: mh_p_abcl__frnd_004 &lt;dbl&gt;</span></span></code></pre></div>
<p>When we compute the score, only the 1, 4 rows are computed, because other rows contain <code>777</code> or <code>999</code> or <code>NA</code> values.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">compute_mh_p_abcl__afs__frnd_sum</span>(data, <span class="dt">exclude =</span> <span class="kw">c</span>(<span class="st">&quot;777&quot;</span>, <span class="st">&quot;999&quot;</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a><span class="co">#&gt;                 &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a><span class="co">#&gt; 1                   1                   1                   1</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a><span class="co">#&gt; 2                   2                 777                   2</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a><span class="co">#&gt; 3                   3                   3                  NA</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a><span class="co">#&gt; 4                   4                   4                   4</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a><span class="co">#&gt; 5                   5                 777                 777</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a><span class="co">#&gt; # ℹ 2 more variables: mh_p_abcl__frnd_004 &lt;dbl&gt;, mh_p_abcl__afs__frnd_sum &lt;int&gt;</span></span></code></pre></div>
<p>We can also exclude custom values, for example, we can exclude <code>4</code>, and then only the first row is computed.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="kw">compute_mh_p_abcl__afs__frnd_sum</span>(data, <span class="dt">exclude =</span> <span class="kw">c</span>(<span class="st">&quot;777&quot;</span>, <span class="st">&quot;999&quot;</span>, <span class="st">&quot;4&quot;</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a><span class="co">#&gt;                 &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true"></a><span class="co">#&gt; 1                   1                   1                   1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true"></a><span class="co">#&gt; 2                   2                 777                   2</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true"></a><span class="co">#&gt; 3                   3                   3                  NA</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true"></a><span class="co">#&gt; 4                   4                   4                   4</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true"></a><span class="co">#&gt; 5                   5                 777                 777</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true"></a><span class="co">#&gt; # ℹ 2 more variables: mh_p_abcl__frnd_004 &lt;dbl&gt;, mh_p_abcl__afs__frnd_sum &lt;int&gt;</span></span></code></pre></div>
</div>
</div>
<div id="utility-functions" class="section level3">
<h3>Utility functions</h3>
<p>The <code>compute_&lt;score_name&gt;()</code> functions are the main functions to compute summary scores, with one summary score function for each score (besides a few exceptions that are documented in the other <a href="https://software.nbdc-datahub.org/ABCDscores/articles/">vignettes</a>). However, to be more concise, the main functions often use utility functions. These utility functions are not necessarily meant to be used directly by users of this package, but they are documented and exported for transparency and reproducibility. For the documentation of these functions, see the <a href="https://software.nbdc-datahub.org/ABCDscores/reference/index.html">reference page</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>There are a few exceptions to this rule—the summary scores in the tables <code>su_y_sui</code> and <code>su_y_tlfb</code> are computed using higher level functions as explained in the <a href="https://software.nbdc-datahub.org/ABCDscores/articles/sui.html">SUI</a> and <a href="https://software.nbdc-datahub.org/ABCDscores/articles/tlfb.html">TLFB</a> vignettes.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
